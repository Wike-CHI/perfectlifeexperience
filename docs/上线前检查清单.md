# 上线前检查清单

## 📱 小程序端检查

### 基础配置
- [ ] 微信 AppID 配置正确：`wx4a0b93c3660d1404`
- [ ] 服务器域名白名单已配置（CloudBase 自动配置）
- [ ] 业务域名白名单（如有 H5 页面）

### 云函数部署
在微信开发者工具中部署以下云函数（共19个）：
- [ ] `login` - 用户登录
- [ ] `user` - 用户管理
- [ ] `product` - 商品管理
- [ ] `order` - 订单管理
- [ ] `wallet` - 钱包管理
- [ ] `coupon` - 优惠券管理
- [ ] `promotion` - 推广分销
- [ ] `commission-wallet` - 佣金钱包
- [ ] `wechatpay` - 微信支付
- [ ] `admin-api` - 管理后台接口
- [ ] `initData` - 数据初始化
- [ ] `initAdminData` - 管理员初始化
- [ ] `migration` - 数据库迁移
- [ ] `test-helper` - 测试工具（可选）
- [ ] `upload` - 文件上传
- [ ] `rewardSettlement` - 奖励结算
- [ ] `hello` - 测试函数

### 数据库检查
- [ ] 数据库集合已创建（通过 `initData` 云函数）
- [ ] 索引已创建（通过 `migration` 云函数）
- [ ] 初始数据已导入（商品、分类、优惠券等）
- [ ] 管理员账号已创建（通过 `initAdminData` 云函数）

### 支付配置
- [ ] 微信支付商户号已配置
- [ ] 微信支付 API 密钥已配置
- [ ] 微信支付证书已上传
- [ ] 支付回调地址已配置

### 功能测试
- [ ] 用户登录/注册
- [ ] 商品浏览和搜索
- [ ] 加入购物车
- [ ] 创建订单
- [ ] 微信支付
- [ ] 余额支付
- [ ] 查看订单
- [ ] 申请退款
- [ ] 推广绑定
- [ ] 查看团队
- [ ] 查看奖励
- [ ] 充值钱包
- [ ] 提现佣金

## 🖥️ 管理后台检查

### 页面测试
- [ ] 管理员登录
- [ ] 仪表板数据展示
- [ ] 订单管理（查看、发货）
- [ ] 商品管理（添加、编辑、删除）
- [ ] 用户管理
- [ ] 推广管理
- [ ] 财务管理
- [ ] 退款审核
- [ ] 佣金提现审核
- [ ] 优惠券管理
- [ ] Banner 管理
- [ ] 活动管理
- [ ] 数据统计

## 🔧 系统配置检查

### CloudBase 环境
- [ ] 环境ID：`cloud1-6gmp2qy3171c353`
- [ ] 环境状态正常
- [ ] 数据库连接正常
- [ ] 云存储空间充足
- [ ] 云函数配额充足

### 安全配置
- [ ] 数据库安全规则已配置
- [ ] 云函数访问权限已设置
- [ ] 敏感信息已脱敏（日志、错误信息）

## 📢 发布流程

### 1. 提交审核前
- [ ] 小程序名称、类目、描述已填写
- [ ] 小程序图标已上传
- [ ] 服务类目已选择
- [ ] 用户隐私保护指引已填写
- [ ] 用户协议已配置
- [ ] 隐私政策已配置

### 2. 提交审核
- [ ] 在微信开发者工具中点击"上传"
- [ ] 填写版本号和项目备注
- [ ] 等待上传完成
- [ ] 在微信公众平台提交审核
- [ ] 填写审核说明
- [ ] 等待审核结果（通常1-7天）

### 3. 审核通过后
- [ ] 点击"全量发布"
- [ ] 确认发布范围
- [ ] 等待发布完成
- [ ] 通知用户更新

## 📝 上线后监控

- [ ] 监控云函数错误率
- [ ] 监控订单成功率
- [ ] 监控支付成功率
- [ ] 监控用户反馈
- [ ] 定期备份数据库

---

## ⚠️ 注意事项

1. **支付回调地址**：确保云函数 HTTP 触发器 URL 已配置到微信商户平台
2. **数据库索引**：首次部署后运行 `migration` 云函数创建索引
3. **初始数据**：运行 `initData` 云函数导入初始商品数据
4. **管理员账号**：运行 `initAdminData` 云函数创建管理员
5. **测试环境**：建议先在测试环境充分测试后再发布生产环境

---

## 📞 遇到问题？

- 查看 [部署指南](./deployment/DEPLOYMENT_GUIDE.md)
- 查看 [快速测试指南](./deployment/QUICK_TEST_GUIDE.md)
- 检查云函数日志
- 检查数据库状态

---

**最后更新**: 2026-02-26
