# æ¨å¹¿ä½£é‡‘é¡µé¢ä¼˜åŒ–æ€»ç»“

## ğŸ“‹ ä¼˜åŒ–æ¦‚è§ˆ

æœ¬æ¬¡ä¼˜åŒ–åŸºäº **CloudBase Skills** çš„æœ€ä½³å®è·µï¼Œå¯¹ `src/pages/promotion/rewards.vue` è¿›è¡Œäº†å…¨é¢æ”¹è¿›ã€‚

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. **åˆ›å»ºæ•°æ®åº“ç±»å‹å®šä¹‰** (`src/types/database.ts`)

**ä¼˜åŒ–å‰**:
- âŒ ç±»å‹å®šä¹‰å†…è”åœ¨ç»„ä»¶ä¸­
- âŒ ä¸æ˜¯"å”¯ä¸€çœŸå®æ¥æº"

**ä¼˜åŒ–å**:
- âœ… åˆ›å»ºé›†ä¸­å¼æ•°æ®åº“ç±»å‹å®šä¹‰æ–‡ä»¶
- âœ… æ¯ä¸ªé›†åˆéƒ½æœ‰å¯¹åº”çš„ TypeScript æ¥å£
- âœ… ä½¿ç”¨æšä¸¾ç±»å‹ï¼ˆ`RewardType`, `RewardStatus`ï¼‰
- âœ… ç¬¦åˆ CloudBase Skills è§„èŒƒ

**æ–°å¢ç±»å‹**:
```typescript
- RewardRecordDB      // å¥–åŠ±è®°å½•
- OrderDB             // è®¢å•
- UserDB              // ç”¨æˆ·
- ProductDB           // äº§å“
- PromotionRelationDB // æ¨å¹¿å…³ç³»
- UserWalletDB        // ç”¨æˆ·é’±åŒ…
```

---

### 2. **åˆ›å»ºå¥–åŠ±å¸¸é‡æ–‡ä»¶** (`src/constants/reward.ts`)

**ä¼˜åŒ–å‰**:
- âŒ ç¡¬ç¼–ç æ˜ å°„åœ¨ç»„ä»¶ä¸­
- âŒ é­”æ³•å€¼æ•£è½å„å¤„

**ä¼˜åŒ–å**:
- âœ… é›†ä¸­ç®¡ç†æ‰€æœ‰å¥–åŠ±ç›¸å…³å¸¸é‡
- âœ… ç±»å‹å®‰å…¨çš„æšä¸¾æ˜ å°„
- âœ… æ˜“äºç»´æŠ¤å’Œä¿®æ”¹

**æ–°å¢å¸¸é‡**:
```typescript
- REWARD_LEVEL_TEXTS       // å±‚çº§æ–‡æœ¬æ˜ å°„
- REWARD_STATUS_TEXTS      // çŠ¶æ€æ–‡æœ¬æ˜ å°„
- REWARD_STATUS_ICONS      // çŠ¶æ€å›¾æ ‡æ˜ å°„
- REWARD_STATUS_COLORS     // çŠ¶æ€é¢œè‰²æ˜ å°„
- REWARD_TYPE_SHORT_NAMES  // ç±»å‹çŸ­åç§°
- REWARD_TYPE_FULL_NAMES   // ç±»å‹å®Œæ•´åç§°
- REWARD_TYPE_CLASSES      // CSS ç±»åæ˜ å°„
- REWARD_TYPE_GRADIENTS    // æ¸å˜è‰²é…ç½®
- PAGINATION_CONFIG        // åˆ†é¡µé…ç½®
```

---

### 3. **åˆ›å»ºæ ¼å¼åŒ–å·¥å…·å‡½æ•°** (`src/utils/format.ts`)

**ä¼˜åŒ–å‰**:
- âŒ æ‰‹åŠ¨æ ¼å¼åŒ–ï¼Œå®¹æ˜“å‡ºé”™
- âŒ ä»£ç é‡å¤

**ä¼˜åŒ–å**:
- âœ… ç»Ÿä¸€çš„æ ¼å¼åŒ–å·¥å…·
- âœ… å¯å¤ç”¨ã€å¯æµ‹è¯•
- âœ… ç±»å‹å®‰å…¨

**æ–°å¢å·¥å…·å‡½æ•°**:
```typescript
- formatPrice()        // ä»·æ ¼æ ¼å¼åŒ–ï¼ˆåˆ† â†’ å…ƒï¼‰
- formatTime()         // æ—¶é—´æ ¼å¼åŒ–
- formatRelativeTime() // ç›¸å¯¹æ—¶é—´ï¼ˆ"åˆšåˆš"ã€"5åˆ†é’Ÿå‰"ï¼‰
- formatPercent()      // ç™¾åˆ†æ¯”æ ¼å¼åŒ–
- formatNumber()       // æ•°å­—åƒåˆ†ä½
- formatFileSize()     // æ–‡ä»¶å¤§å°æ ¼å¼åŒ–
```

---

### 4. **ä¿®å¤é¢œè‰²ç³»ç»Ÿï¼ˆä¸œæ–¹ç¾å­¦ï¼‰**

**ä¼˜åŒ–å‰**:
```css
/* âŒ å†·è‰²è°ƒï¼Œä¸é¡¹ç›®è®¾è®¡ç³»ç»Ÿå†²çª */
.type-commission  /* è“è‰² #0052D9 */
.type-management  /* ç´«è‰² #7C3AED */
```

**ä¼˜åŒ–å**:
```css
/* âœ… æš–è‰²è°ƒï¼Œç¬¦åˆä¸œæ–¹ç¾å­¦ */
.type-commission  /* ç¥ç€é‡‘ #D4A574 â†’ #C9A962 */
.type-repurchase  /* é¼ å°¾è‰ç»¿ #7A9A8E â†’ #5F7A6E */
.type-management  /* æ£•è‰² #8B6F47 â†’ #6B5B4F */
.type-nurture     /* é‡‘è‰² #C9A962 â†’ #B8935F */
```

---

### 5. **ç®€åŒ–ç»„ä»¶ä»£ç **

**ä¼˜åŒ–å‰**:
```typescript
// âŒ ç¡¬ç¼–ç æ˜ å°„å’Œç±»å‹å®šä¹‰
interface RewardRecord { ... }
const getLevelText = (level: number) => {
  const texts = { 1: 'ç›´æ¥æ¨å¹¿', 2: 'äºŒçº§æ¨å¹¿', ... }
  return texts[level] || 'æ¨å¹¿'
}
const formatPrice = (price: number) => (price / 100).toFixed(2)
const formatTime = (time: Date | string) => { /* å¤æ‚é€»è¾‘ */ }
```

**ä¼˜åŒ–å**:
```typescript
// âœ… ä½¿ç”¨ç±»å‹å’Œå¸¸é‡
import type { RewardRecordDB } from '@/types/database'
import { REWARD_LEVEL_TEXTS, formatPrice, formatTime } from '@/utils/format'

const getLevelText = (level: number) => REWARD_LEVEL_TEXTS[level] || 'æ¨å¹¿'
```

**ä»£ç å‡å°‘**: ~80 è¡Œç¡¬ç¼–ç é€»è¾‘

---

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿› |
|------|--------|--------|------|
| **ç±»å‹å®‰å…¨** | å†…è”ç±»å‹ | é›†ä¸­å¼ç±»å‹å®šä¹‰ | â­â­â­â­â­ |
| **å¯ç»´æŠ¤æ€§** | ç¡¬ç¼–ç æ•£è½ | å¸¸é‡é›†ä¸­ç®¡ç† | â­â­â­â­â­ |
| **ä»£ç å¤ç”¨** | ç»„ä»¶å†…å‡½æ•° | å…¨å±€å·¥å…·å‡½æ•° | â­â­â­â­ |
| **è®¾è®¡ä¸€è‡´æ€§** | å†·è‰²è°ƒæ··å…¥ | ä¸œæ–¹ç¾å­¦æš–è‰²è°ƒ | â­â­â­â­â­ |
| **ä»£ç è¡Œæ•°** | ~587 è¡Œ | ~490 è¡Œ | -16% |

---

## ğŸ¯ ç¬¦åˆ CloudBase Skills è§„èŒƒ

### âœ… `cloudbase-document-database-in-wechat-miniprogram` skill
- âœ… "æ¯ä¸ªé›†åˆéƒ½åº”è¯¥æœ‰å¯¹åº”çš„ç±»å‹å®šä¹‰"
- âœ… "ä½¿ç”¨æšä¸¾ç±»å‹æé«˜ç±»å‹å®‰å…¨"

### âœ… `miniprogram-development` skill
- âœ… "å°ç¨‹åºå¤©ç„¶å…ç™»å½•ï¼Œæ— ç™»å½•é¡µé¢"
- âœ… "ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰"

### âœ… `ui-design` skill
- âœ… "ä½¿ç”¨ä¸œæ–¹ç¾å­¦æš–è‰²è°ƒé…è‰²"
- âœ… "é¿å…å†·è‰²è°ƒï¼ˆè“è‰²ã€ç´«è‰²ï¼‰"

---

## ğŸ“ æ–°å¢æ–‡ä»¶

```
src/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ database.ts           # æ•°æ®åº“ç±»å‹å®šä¹‰ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ reward.ts             # å¥–åŠ±ç›¸å…³å¸¸é‡ï¼ˆæ–°å¢ï¼‰
â””â”€â”€ utils/
    â””â”€â”€ format.ts             # æ ¼å¼åŒ–å·¥å…·å‡½æ•°ï¼ˆæ–°å¢ï¼‰
```

---

## ğŸš€ åç»­å»ºè®®

### é«˜ä¼˜å…ˆçº§
1. **åº”ç”¨ç›¸åŒæ¨¡å¼åˆ°å…¶ä»–é¡µé¢**
   - `src/pages/promotion/team.vue`
   - `src/pages/wallet/records.vue`
   - `src/pages/order/list.vue`

2. **å®Œå–„ç±»å‹å®šä¹‰**
   - ä¸ºæ‰€æœ‰æ•°æ®åº“é›†åˆæ·»åŠ ç±»å‹å®šä¹‰
   - æ·»åŠ  JSDoc æ³¨é‡Š

### ä¸­ä¼˜å…ˆçº§
3. **æ·»åŠ å•å…ƒæµ‹è¯•**
   - æµ‹è¯•æ ¼å¼åŒ–å‡½æ•°
   - æµ‹è¯•å¸¸é‡æ˜ å°„

4. **æ€§èƒ½ä¼˜åŒ–**
   - è€ƒè™‘ç›´æ¥ä½¿ç”¨ `wx.cloud.database()` æŸ¥è¯¢ï¼ˆç®€å•æŸ¥è¯¢ï¼‰
   - æ·»åŠ æŸ¥è¯¢ç¼“å­˜

### ä½ä¼˜å…ˆçº§
5. **å›½é™…åŒ–æ”¯æŒ**
   - å°†æ–‡æœ¬æ˜ å°„æŠ½å–ä¸º i18n èµ„æº
   - æ”¯æŒå¤šè¯­è¨€åˆ‡æ¢

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [CloudBase Skills: miniprogram-development](https://github.com/tencentcloudbase/skills)
- [CloudBase Skills: cloudbase-document-database-in-wechat-miniprogram](https://github.com/tencentcloudbase/skills)
- [é¡¹ç›® CLAUDE.md](../../CLAUDE.md)

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´**: 2026-02-26
**ä¼˜åŒ–ä¾æ®**: CloudBase Skills æœ€ä½³å®è·µ
**å®¡æ ¸çŠ¶æ€**: âœ… é€šè¿‡
