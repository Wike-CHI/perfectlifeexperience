{
  "rules": {
    "admins": {
      ".read": false,
      ".write": false
    },
    "categories": {
      ".read": true,
      ".write": false
    },
    "coupon_templates": {
      ".read": true,
      ".write": false
    },
    "orders": {
      ".read": "auth.openid == doc._openid",
      ".write": "auth.openid == doc._openid",
      "_openid": {
        ".write": false
      },
      "paymentStatus": {
        ".write": false
      },
      "totalAmount": {
        ".write": false
      },
      "productItems": {
        ".write": false
      },
      "addressInfo": {
        ".write": false
      },
      "createTime": {
        ".write": false
      },
      "paymentUpdateTime": {
        ".write": false
      }
    },
    "products": {
      ".read": true,
      ".write": false
    },
    "promotion_logs": {
      ".read": false,
      ".write": false
    },
    "promotion_orders": {
      ".read": "auth.openid == doc.buyerId || auth.openid == doc.promoterId",
      ".write": false
    },
    "promotion_relations": {
      ".read": "auth.openid == doc.parentId || auth.openid == doc.childId",
      ".write": false
    },
    "recharge_orders": {
      ".read": "auth.openid == doc._openid",
      ".write": false,
      "_openid": {
        ".write": false
      },
      "status": {
        ".write": false
      },
      "amount": {
        ".write": false
      }
    },
    "refunds": {
      ".read": "auth.openid == doc._openid",
      ".write": false,
      "_openid": {
        ".write": false
      },
      "refundStatus": {
        ".write": false
      },
      "refundAmount": {
        ".write": false
      }
    },
    "reward_records": {
      ".read": "auth.openid == doc.beneficiaryId",
      ".write": false,
      "_openid": {
        ".write": false
      }
    },
    "user_coupons": {
      ".read": "auth.openid == doc._openid",
      ".write": false,
      "_openid": {
        ".write": false
      },
      "status": {
        ".write": "auth.openid == doc._openid && (newData.status == 'used' || newData.status == 'expired')"
      }
    },
    "user_wallets": {
      ".read": "auth.openid == doc._openid",
      ".write": false,
      "_openid": {
        ".write": false
      },
      "balance": {
        ".write": false
      },
      "totalRecharge": {
        ".write": false
      },
      "totalWithdraw": {
        ".write": false
      },
      "createTime": {
        ".write": false
      },
      "updateTime": {
        ".write": false
      }
    },
    "users": {
      ".read": "auth.openid != null && auth.openid == doc._openid",
      ".write": "auth.openid != null && auth.openid == doc._openid",
      "agentLevel": {
        ".write": "auth.openid == doc._openid && newData.agentLevel >= oldData.agentLevel"
      },
      "starLevel": {
        ".write": "auth.openid == doc._openid && newData.starLevel >= oldData.starLevel"
      },
      "_openid": {
        ".write": false
      },
      "parentId": {
        ".write": false
      },
      "performance": {
        ".write": false
      },
      "createTime": {
        ".write": false
      },
      "updateTime": {
        ".write": false
      }
    },
    "wallet_transactions": {
      ".read": "auth.openid == doc._openid",
      ".write": false,
      "_openid": {
        ".write": false
      },
      "amount": {
        ".write": false
      },
      "type": {
        ".write": false
      },
      "balanceAfter": {
        ".write": false
      },
      "createTime": {
        ".write": false
      }
    }
  }
}
